<html><head><title>dbdToHtml.pl</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" type="text/css" title="pod_stylesheet" href="style.css">

</head>
<body class='pod'>
<!--
  generated by EPICS::PodHtml v,
  using Pod::Simple::PullParser v3.35,
  under Perl v5.028001 at Fri Aug 14 17:06:00 2020 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to EPICS::PodHtml, and/or subclassing EPICS::PodHtml,
   then reconverting this document from the Pod source.
   When in doubt, email the author of EPICS::PodHtml for advice.
   See 'perldoc EPICS::PodHtml' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u'
name="NAME"
>NAME</a></h1>

<p>dbdToHtml.pl - Convert DBD file with POD to HTML</p>

<h1><a class='u'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<p><b>dbdToHtml.pl</b> [<b>-h</b>] [<b>-D</b>] [<b>-I</b> dir] [<b>-o</b> file] file.dbd.pod</p>

<h1><a class='u'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>Generates HTML documentation from a <b>.dbd.pod</b> file.</p>

<h1><a class='u'
name="OPTIONS"
>OPTIONS</a></h1>

<p><b>dbdToHtml.pl</b> understands the following options:</p>

<dl>
<dt><a name="-h"
><b>-h</b></a></dt>

<dd>
<p>Help,
display usage information.</p>

<dt><a name="-H"
><b>-H</b></a></dt>

<dd>
<p>Conversion help,
display information about converting reference documentation from the EPICS Wiki into a <b>.dbd.pod</b> file for use with this tool.</p>

<dt><a name="-D"
><b>-D</b></a></dt>

<dd>
<p>Instead of creating the output file as described,
read the input file(s) and print a <b>Makefile</b> dependency rule for the output file(s) to stdout.</p>

<dt><a name="-o-file"
><b>-o</b> file</a></dt>

<dd>
<p>Name of the output file to be created.</p>
</dd>
</dl>

<p>If no output filename is set,
the file created will be named after the input file,
removing any directory components in the path and replacing any <b>.dbd.pod</b> file extension with <b>.html</b>.</p>

<h1><a class='u'
name="Converting-Wiki-Record-Reference-to-POD"
>Converting Wiki Record Reference to POD</a></h1>

<p>If you open the src/std/rec/aiRecord.dbd.pod file in your favourite plain text editor you&#39;ll see what input was required to generate the aiRecord.html file.
The text markup language we&#39;re using is a standard called POD (Plain Old Documentation) which is used by Perl developers,
but you don&#39;t need to know Perl at all to be able to use it.</p>

<p>When we add POD markup to a record type,
we rename its *Record.dbd file to .dbd.pod in the src/std/rec directory; no other changes are needed for the build system to find it by its new name.
The POD content is effectively just a new kind of comment that appears in .dbd.pod files,
which the formatter knows how to convert into HTML.
The build also generates a plain *Record.dbd file from this same input file by stripping out all of the POD markup.</p>

<p>Documentation for Perl&#39;s POD markup standard can be found online at <a href="https://perldoc.perl.org/perlpod.html" class="podlinkurl"
>https://perldoc.perl.org/perlpod.html</a> or you may be able to type &#39;perldoc perlpod&#39; into a Linux command-line to see the same text.
We added a few POD keywords of our own to handle the table generation,
and I&#39;ll cover those briefly below.</p>

<p>POD text can appear almost anywhere in a dbd.pod file.
It always starts with a line &#34;=[keyword] [additional text...]&#34; where [keyword] is &#34;title&#34;,
&#34;head1&#34; through &#34;head4&#34; etc..
The POD text ends with a line &#34;=cut&#34;.
There must be a blank line above every POD line,
and in many cases below it as well.</p>

<p>The POD keywords we have added are &#34;title&#34;,
&#34;recordtype&#34;,
&#34;menu&#34;,
&#34;fields&#34;,
&#34;type&#34;,
&#34;read&#34; and &#34;write&#34;.
The last 3 are less common but are used in some of the other record types such as the waveform and aSub records.</p>

<p>The most interesting of our new keywords is &#34;fields&#34;,
which takes a list of record field names on the same line after the keyword and generates an HTML Table describing those fields based on the field description found in the DBD parts.
In the ai documentation the first such table covers the DTYP and INP fields,
so the line</p>

<pre>    =fields DTYP, INP</pre>

<p>generates all this in the output:</p>

<pre>    &#60;blockquote&#62;&#60;table border=&#34;1&#34;&#62;
    &#60;tr&#62;
    &#60;th&#62;Field&#60;/th&#62;&#60;th&#62;Summary&#60;/th&#62;&#60;th&#62;Type&#60;/th&#62;&#60;th&#62;DCT&#60;/th&#62;
    &#60;th&#62;Default&#60;/th&#62;&#60;th&#62;Read&#60;/th&#62;&#60;th&#62;Write&#60;/th&#62;&#60;th&#62;CA PP&#60;/th&#62;
    &#60;/tr&#62;
    &#60;tr&#62;
    &#60;td class=&#34;cell&#34;&#62;DTYP&#60;/td&#62;&#60;td class=&#34;cell&#34;&#62;Device Type&#60;/td&#62;
    &#60;td class=&#34;cell&#34;&#62;DEVICE&#60;/td&#62;
    &#60;td class=&#34;cell&#34;&#62;Yes&#60;/td&#62;
    &#60;td class=&#34;cell&#34;&#62;&#38;nbsp;&#60;/td&#62;
    &#60;td class=&#34;cell&#34;&#62;Yes&#60;/td&#62;
    &#60;td class=&#34;cell&#34;&#62;Yes&#60;/td&#62;
    &#60;td class=&#34;cell&#34;&#62;No&#60;/td&#62;
    &#60;/tr&#62;
    &#60;tr&#62;
    &#60;td class=&#34;cell&#34;&#62;INP&#60;/td&#62;
    &#60;td class=&#34;cell&#34;&#62;Input Specification&#60;/td&#62;
    &#60;td class=&#34;cell&#34;&#62;INLINK&#60;/td&#62;
    &#60;td class=&#34;cell&#34;&#62;Yes&#60;/td&#62;
    &#60;td class=&#34;cell&#34;&#62;&#38;nbsp;&#60;/td&#62;
    &#60;td class=&#34;cell&#34;&#62;Yes&#60;/td&#62;
    &#60;td class=&#34;cell&#34;&#62;Yes&#60;/td&#62;
    &#60;td class=&#34;cell&#34;&#62;No&#60;/td&#62;
    &#60;/tr&#62;
    &#60;/table&#62;&#60;/blockquote&#62;</pre>

<p>Note that the &#34;=fields&#34; line must appear inside the DBD&#39;s declaration of the record type, i.e. after the line</p>

<pre>    recordtype(ai) {</pre>

<p>The &#34;type&#34;, &#34;read&#34; and &#34;write&#34; POD keywords are used inside an individual record field declaration and provide information for the &#34;Type&#34;, &#34;Read&#34; and &#34;Write&#34; columns of the field&#39;s table output for fields where this information is normally supplied by the record support code. Usage examples for these keywords can be found in the aai and aSub record types.</p>

<p>If you look at the <a href="aoRecord.dbd.pod.html" class="podlinkpod"
>aoRecord.dbd.pod</a> file you&#39;ll see that the POD there starts by documenting a record-specific menu definition. The &#34;menu&#34; keyword generates a table that lists all the choices found in the named menu. Any MENU fields in the field tables that refer to a locally-defined menu will generate a link to a document section which must be titled &#34;Menu [menuName]&#34;.</p>

<!-- end doc -->

</body></html>
