<html><head><title>EPICS::Readfile</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" type="text/css" title="pod_stylesheet" href="../style.css">

</head>
<body class='pod'>
<!--
  generated by EPICS::PodHtml v,
  using Pod::Simple::PullParser v3.35,
  under Perl v5.028001 at Fri Aug 14 17:05:18 2020 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to EPICS::PodHtml, and/or subclassing EPICS::PodHtml,
   then reconverting this document from the Pod source.
   When in doubt, email the author of EPICS::PodHtml for advice.
   See 'perldoc EPICS::PodHtml' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u'
name="NAME"
>NAME</a></h1>

<p>EPICS::Readfile - DBD and DB-file input for EPICS tools</p>

<h1><a class='u'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  use lib &#39;/path/to/base/lib/perl&#39;;
  use EPICS::macLib;
  use EPICS::Readfile;

  my $macros = EPICS::macLib-&#62;new(&#39;a=1&#39;, &#39;b=2&#39;);
  my @path = qw(../dbd /opt/epics/base/dbd);
  my $contents = Readfile(&#39;input.dbd&#39;, $macros, \@path);
  printf &#34;Read in %d files&#34;, scalar @inputfiles;</pre>

<h1><a class='u'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This module provides a function for reading DBD and DB files that is commonly needed by EPICS tools.</p>

<h1><a class='u'
name="FUNCTIONS"
>FUNCTIONS</a></h1>

<dl>
<dt><a name="Readfile($file,-$macros,-\@path)"
><b><code>Readfile($file, $macros, \@path)</code></b></a></dt>

<dd>
<p>This function reads an EPICS DBD or DB file into a string, substitutes any macros present, then parses the contents for any <code>include</code>, <code>addpath</code> and <code>path</code> commands found therein and recursively executes those commands. The return value from the function is a string comprising the fully expanded contents of those files. Before executing them any commands will be replaced with specially formatted comments that allow the original command to be recovered during later parsing.</p>

<p><i>Readfile</i> takes as arguments the input filename, an optional handle to a set of macro values from <a href="macLib.html" class="podlinkpod"
>EPICS::macLib</a>, and a reference to an array containing the current search path.</p>

<p>If macro expansion is not required, the second argument may be any boolean False value such as <code>0</code> or <code>()</code>. See <a href="macLib.html" class="podlinkpod"
>EPICS::macLib</a> for more details about this argument.</p>

<p>The path argument is a reference to an array of directory paths to be searched, in order. These paths may be used to locate the original input file and any include files that it references. The path array will be modified by any <code>addpath</code> or <code>path</code> commands found while parsing the input files.</p>

<p>While processing input filenames (either the original argument or an include filename) if the filename does not contain any forward-slash <code>/</code> characters the path will be searched and the first file matching that name will be used. If the filename contains one or more forward-slash characters it must be either an absolute path or one that is relative to the current working directory; the search path is not used in this case.</p>
</dd>
</dl>

<h1><a class='u'
name="VARIABLES"
>VARIABLES</a></h1>

<dl>
<dt><a name="@inputfiles"
><b><code>@inputfiles</code></b></a></dt>

<dd>
<p>As new files are processed their names are added to this array which may be examimed after the <i>Readfile</i> function returns, for example to calculate the complete set of dependencies for the input file.</p>
</dd>
</dl>

<h1><a class='u'
name="COPYRIGHT-AND-LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>Copyright (C) 2015 UChicago Argonne LLC, as Operator of Argonne National Laboratory.</p>

<p>This software is distributed under the terms of the EPICS Open License.</p>

<!-- end doc -->

</body></html>
